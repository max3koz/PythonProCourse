# Django Library Project

## 1. Сесії та Cookies

- **Форма входу:** користувач вводить ім’я та вік.
- **Збереження даних:**
    - Ім’я — у cookies.
    - Вік — у сесії.
- **Сторінка привітання:** персоналізоване повідомлення
  `Привіт, {ім’я}, вам {вік} років`.
- **Кнопка "Вийти":** очищає cookies та сесію.
- **Автоподовження cookies:** реалізовано при активному використанні.

---

## 2. Оптимізація та продуктивність

### ORM-запити

    -------------------------------------------
    | Тип запиту        | Час виконання (сек) |
    |-------------------|---------------------|
    | Без оптимізації   | 0.1096              |
    | З оптимізацією    | 0.0128              |
    -------------------------------------------

- Використано `select_related` та `prefetch_related`.
- Усунено проблему N+1.

### Кешування

- **Кешування результату:** `book_list_view` кешує список книг з авторами.
- **Кешування сторінки:** реалізовано через `@cache_page` та middleware:
  ```python
  'django.middleware.cache.UpdateCacheMiddleware',
  'django.middleware.common.CommonMiddleware',
  'django.middleware.cache.FetchFromCacheMiddleware',
    Оновлення кешу: при зміні/додаванні книги кеш інвалідується.

### Django Debug Toolbar

- **Використано для аналізу SQL-запитів.**
- **Виявлено надмірні запити у books_unoptimized_view.**
  Оптимізовано через ORM-зв’язки.

### Шаблони

- **Дані передаються оптимально.**
- **Перевірено продуктивність через Debug Toolbar.**

### Celery + Redis

- **Імпорт CSV: асинхронне завдання import_books_task.**
- **Email-підтвердження: надсилається після завершення імпорту.**
- **Сторінка статусу: task_status_view показує стан (SUCCESS, FAILURE).**

## 3. Глибоке занурення в ORM

### Агрегації

- **По середному рейтингу книг кожного автора.**
- **По кількісті відгуків кожної книги.**
- **Реалізовано сортування за кількістю відгуків та середнім рейтингом.**

### Raw SQL

- **Автори з книгами з ≥ N відгуками.**

- Загальна кількість книг: 53.
- Книг з ≥ 10 відгуками: 28.
- Реализован захист: параметризовані запити (cursor.execute(..., [threshold])).

### Індексація

    -------------------------------------------
    | Стан	        | Час запиту (сек)        |
    -------------------------------------------
    | Без індексу	|  2.012                  |
    | З індексом	|  1.616                  |
    -------------------------------------------

- **Додано індекси на Book.title, Review.rating.**
- **Наявність індексів дає вигришь у часію**

### NoSQL (MongoDB)

- **Збереження/читання: через pymongo, база application.books.**
- **Dbrjhbcnfd rонтейнер: mongo:4.4 у Docker.**
- **Сторінка: nosql_demo_view показує список книг та маю кнопку додавання книг
  до MongoDB.**

### Порівняння SQL vs NoSQL:

    ------------------------------------
    |Операція |	Книг ≥ 10  | Час (сек)  |
    |-----------------------------------|
    |SQL	  |     28	   |    0.0061  |
    |NoSQL	  |     28	   |    0.0289  |
    -------------------------------------

- **Операції з SQL швидші для агрегацій.**
- **NoSQL зручний для гнучких вставок та денормалізованих даних.**
